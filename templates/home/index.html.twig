{% extends 'base.html.twig' %}

{% block title %}PROSMobile - Accueil{% endblock %}

{% block body %}
	{# discount message #}
	<div id="discount-message-toast"></div>
{% endblock %}

{% block javascripts %}
	{{ encore_entry_script_tags('app') }}
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
	{# discount message #}
	<script>
		{% for promo in promos %}
			{% if promo is defined and not null %}
createToast('PROSMobile', 'Message', '{{ promo.nom }}', '{{ promo.pourcentage }}');
function createToast(title, smallText, firstWord, secondWord) {
let id = new Date().getTime();
let html = `<div role="alert" aria-live="assertive" aria-atomic="true" class="toast" data-delay="10000" id=${id}>
                <div class="toast-header">
                    <i class="fa fa-mobile-alt mr-2"></i>
                    <strong class="mr-auto">${title}</strong>
                    <small>${smallText}</small>
                    <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="toast-body">
                    ${firstWord} : remise de ${secondWord} % sur les articles
                </div>
            </div>`;
document.getElementById('discount-message-toast').innerHTML += html;
$(`#${id}`).toast('show');
}
$('body').on('click', '.close', function () {
$(this).closest('.toast').toast('show')
})
			{% else %}
				{# #}
			{% endif %}
		{% endfor %}
	</script>
{% endblock %}
